<html>
<head>
  <title>Path Tracer</title>
  <style>

  body {
    background: #222;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #viewport {
    box-shadow: 3px 3px 100px #000
  }
  
  </style>
</head>
<body>
  <canvas id='viewport' width='640' height='360' style='background: #000;'></canvas>
  <script src='scripts/loop.js'></script>
  <script src='scripts/vector3.js'></script>
  <script src='scripts/ray3.js'></script>
  <script src='scripts/tracer.js'></script>
  <script src='scripts/camera.js'></script>
  <script src='scripts/material.js'></script>
  <script src='scripts/sphere.js'></script>
  <script src='scripts/scene.js'></script>
  <script src='scripts/sphere-scene.js'></script>
  <script>

  main()
  async function main () {
    const scene = new SphereScene()
    const tracer = new Tracer({
      canvas: document.getElementById('viewport'),
      scene: await scene.load(),
      camera: new Camera({ lens: 0.040, focus: 20, position: new Vector3(0, 15, 15) }),
      bounces: 10
    })
    loop(50, () => tracer.exposeNext(), () => tracer.draw(true))
  }
  
  </script>
</body>
</html>
